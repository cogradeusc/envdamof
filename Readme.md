# Overview

This folder contains SQL code used in the implementation and evaluation of the first prototype of a conceptual data modeling framework with four levels of abstraction for environmental information. The contents of the folder are next outlined.

- **Template for the data model of level one** [level1ModelSQLTemplates.sql]: The general purpose data model for environmental data that may be specialized in subsequent levels of abstraction is implemented in SQL with a collection of CREATE TABLE templates. 
- **SQL implementation of the metadata catalog structures** [catalog.sql]: The file contains tha SQL DDL code for the creation of the catalog schema. Templates are also given for required JSON substructures.
- **Templates for the data models of level two** [Level2ModelSQLTemplates]: The folder contains one SQL file for each of the three example application areas chosen to illulstrate the approach, namely, air quality, traffic and climate science. As for the level one data model, each file contains a collection of CREATE TABLE templates reused during the construction of structures of level three. Each template reuses a relevant template of level one.
- **SQL schemas of the use case datasets designed following the framework approach** [Level3UseCaseModels]: The folder contains one SQL file for each dataset used to illustrate and evaluate the approach. Each such file contains two parts. The first part is the SQL DDL schema of the dataset tables, constructed reusing the templates of the relevant Level 2 model. The second part contains the rows to be inserted in the metadata calalog for the dataset. 
- **Original SQL schemas (Ad-hoc) of the use case dataset** [Ad-hocModels]: The folder contains  one SQL file for each dataset used to illustrate and evaluate the approach. Each file includes the SQL DDL code used by the ad-hoc implementation of the data structures of the dataset.
- **Simplified SQL schema used by the data warehouse of the chosen SOS Tool** [SOSTool]: The folder contains an SQL DDL code file with a simplified version of the relational schema used by a well-known reference Sensor Observation Service (SOS) implementation. 
- **SQL Queries used to evaluate the performace of the framework with respect to Ad-hoc and SOS implementations** [EvaluationQueries]: The folder contains a subfolder for each use case dataset. In each such folder, and SQL file with SELECT statements is included for each of the three compared solutions: The current prototype of the present framework (envdamof), an ad-hoc implementation and the SOS tool. 

# Requirements
The code has been tested with PostgreSQL 15.3 and PostGIS 3.3

# Data availability
The data of all the datasets is publicly available in their relevant data producer organizations.

- **Traffic and air quality data**: The data used was extracted from the one generated by the EU TRAFAIR  project (https://trafair.eu/) for the city of Santiago de Compostela. The data may be currently obtained from the European Data Portal (https://data.europa.eu/).
- **Meteorological data**: The data used may be obtained from the open data infrastructure of MeteoGalicia (https://www.meteogalicia.gal). 
- **Oceanographic data**: The data used may be obtained from the open data infrastructure of Intemcar (https://www.intecmar.gal/).

To reproduce the experiments undertaken during the evaluation of the framework, CSV files adapted to the schemas of all the approaches may be provided upon request to the authors of this work. Contact jrr.viqueira@usc.es for this purpose.